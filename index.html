

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Python Template Repository &mdash; package-name 0.1.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/rtd_sphinx_search.min.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/js/rtd_sphinx_search.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="source/packages/modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> package-name
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/packages/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">package-name</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Python Template Repository</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-template-repository">
<h1>Python Template Repository<a class="headerlink" href="#python-template-repository" title="Permalink to this headline">¶</a></h1>
<p>This repository gives a fully-featured template or skeleton for new Python repositories.</p>
<div class="section" id="quick-start">
<h2>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>When creating a new repository from this skeleton, these are the steps to follow:</p>
<ol class="arabic">
<li><p><strong>Don’t click the fork button</strong></p></li>
<li><ol class="arabic">
<li><p>You can create a new repository on GitHub from this template by clicking the <a class="reference external" href="https://github.com/scottclowe/python-template-repo/generate">Use this template</a> button.</p></li>
<li><p>Alternatively, if your new repository is not going to be on GitHub, you can <a class="reference external" href="https://github.com/scottclowe/python-template-repo/archive/master.zip">download this repo as a zip</a> and work from there.
However, you should note that this zip does not include the .gitignore and .gitattributes files (because GitHub automatically omits them, which is usually helpful but is not for our purposes).
Thus you will also need to download the <a class="reference external" href="https://raw.githubusercontent.com/scottclowe/python-template-repo/master/.gitignore">.gitignore</a> and <a class="reference external" href="https://raw.githubusercontent.com/scottclowe/python-template-repo/master/.gitattributes">.gitattributes</a> files.</p>
<p>The following shell commands can be used for this purpose on *nix systems:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git init your_repo_name
cd your_repo_name
wget https://github.com/scottclowe/python-template-repo/archive/master.zip
unzip master.zip
mv -n python-template-repo-master/* python-template-repo-master/.[!.]* .
rm -r python-template-repo-master/
rm master.zip
wget https://raw.githubusercontent.com/scottclowe/python-template-repo/master/.gitignore
wget https://raw.githubusercontent.com/scottclowe/python-template-repo/master/.gitattributes
git add .
git commit -m &quot;Initial commit&quot;
git rm LICENSE
</pre></div>
</div>
<p>Note that we are doing the move with <code class="docutils literal notranslate"><span class="pre">mv</span> <span class="pre">-n</span></code>, which will prevent the template repository from clobbering your own files (in case you already made a README.rst file, for instance).</p>
<p>You’ll need to instruct your new local repository to synchronise with the remote <code class="docutils literal notranslate"><span class="pre">your_repo_url</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="nb">set</span><span class="o">-</span><span class="n">url</span> <span class="n">origin</span> <span class="n">your_repo_url</span>
<span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Remove the dummy files <code class="docutils literal notranslate"><span class="pre">package_name/module.py</span></code> and <code class="docutils literal notranslate"><span class="pre">package_name/tests/test_module.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="n">package_name</span><span class="o">/</span><span class="n">module</span><span class="o">.</span><span class="n">py</span>
<span class="n">rm</span> <span class="n">package_name</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_module</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you prefer, you can keep them around as samples, but should note that they require numpy.</p>
</li>
<li><p>Depending on your needs, some of the files may be superfluous to you.
You can remove any superfluous files, as follows.</p>
<ul>
<li><p><em>Yes to pre-commit!</em>
You can delete the lint GitHub Action, as it is superfluous with the lint checks which are also in pre-commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">lint</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</li>
<li><p><em>No pre-commit!</em>
Run the following commands to remove references to pre-commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;/^pre-commit/d&#39;</span> <span class="n">requirements</span><span class="o">-</span><span class="n">dev</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</li>
<li><p><em>No GitHub Actions!</em>
Delete the .github directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p><em>No unit testing!</em>
Run the following commands to delete unit testing files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">package_name</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">test</span><span class="o">*.</span><span class="n">yaml</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">coveragerc</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="n">requirements</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</li>
<li><p><em>No Documentation!</em>
Run the following commands to delete the documentation and its tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">docs</span><span class="o">/</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">docs</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="mi">7</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">yaml</span> <span class="o">&gt;</span> <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Delete the LICENSE file and replace it with a LICENSE file of your own choosing.
If the code is intended to be freely available for anyone to use, use an <a class="reference external" href="https://choosealicense.com/">open source license</a>, such as <a class="reference external" href="https://choosealicense.com/licenses/mit/">MIT License</a> or <a class="reference external" href="https://choosealicense.com/licenses/gpl-3.0/">GPLv3</a>.
If you don’t want your code to be used by anyone else, add a LICENSE file which just says:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">YEAR</span><span class="p">,</span> <span class="n">YOUR</span> <span class="n">NAME</span>

<span class="n">All</span> <span class="n">right</span> <span class="n">reserved</span><span class="o">.</span>
</pre></div>
</div>
<p>Note that if you don’t include a LICENSE file, you will still have copyright over your own code (this copyright is automatically granted), and your code will be private source (technically nobody else will be permitted to use it, even if you make your code publicly available).</p>
</li>
<li><p>Edit the file <code class="docutils literal notranslate"><span class="pre">package_name/__meta__.py</span></code> to contain your author and repo details.</p>
<dl class="simple">
<dt>name</dt><dd><p>The name as it will/would be on PyPI (users will do <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">new_name_here</span></code>).
It is <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">recommended</a> to use a name all lowercase, runtogetherwords but if separators are needed hyphens are preferred over underscores.</p>
</dd>
<dt>path</dt><dd><p>The path to the package. What you will rename the directory <code class="docutils literal notranslate"><span class="pre">package_name</span></code>.
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">Should be</a> the same as <code class="docutils literal notranslate"><span class="pre">name</span></code>, but now hyphens are disallowed and should be swapped for underscores.
By default, this is automatically inferred from <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
</dd>
<dt>license</dt><dd><p>Should be the name of the license you just picked and put in the LICENSE file (e.g. <code class="docutils literal notranslate"><span class="pre">MIT</span></code> or <code class="docutils literal notranslate"><span class="pre">GPLv3</span></code>).</p>
</dd>
</dl>
<p>Other fields to enter should be self-explanatory.</p>
</li>
<li><p>Rename the directory <code class="docutils literal notranslate"><span class="pre">package_name</span></code> to be the <code class="docutils literal notranslate"><span class="pre">path</span></code> variable you just added to <code class="docutils literal notranslate"><span class="pre">__meta__.py</span></code>.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PACKAGE_NAME</span><span class="o">=</span><span class="n">your_actual_package_name</span>
<span class="n">mv</span> <span class="n">package_name</span> <span class="s2">&quot;$PACKAGE_NAME&quot;</span>
</pre></div>
</div>
</li>
<li><p>Change references to <code class="docutils literal notranslate"><span class="pre">package_name</span></code> to your path variable:</p>
<p>This can be done with the sed command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PACKAGE_NAME</span><span class="o">=</span><span class="n">your_actual_package_name</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s2">&quot;s/package_name/$PACKAGE_NAME/&quot;</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> \
    <span class="n">docs</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">py</span> \
    <span class="n">docs</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span> \
    <span class="n">CHANGELOG</span><span class="o">.</span><span class="n">rst</span> \
    <span class="o">.</span><span class="n">github</span><span class="o">/</span><span class="n">workflows</span><span class="o">/</span><span class="n">test</span><span class="o">*.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>Which will make changes in the following places.</p>
<ul>
<li><p>In <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/setup.py#L69">L69</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exec</span><span class="p">(</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;package_name/__meta__.py&#39;</span><span class="p">),</span> <span class="n">meta</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code>, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/docs/conf.py#L23">L23</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">package_name</span> <span class="kn">import</span> <span class="n">__meta__</span> <span class="k">as</span> <span class="n">meta</span>  <span class="c1"># noqa: E402</span>
</pre></div>
</div>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">docs/index.rst</span></code>, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/docs/index.rst#L1">L1</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package_name</span> <span class="n">documentation</span>
</pre></div>
</div>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">.github/workflows/test.yaml</span></code>, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/.github/workflows/test.yaml#L78">L78</a>, and <code class="docutils literal notranslate"><span class="pre">.github/workflows/test-release-candidate.yaml</span></code>, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/.github/workflows/test-release-candidate.yaml#L90">L90</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="o">--</span><span class="n">cov</span><span class="o">=</span><span class="n">package_name</span> <span class="o">--</span><span class="n">cov</span><span class="o">-</span><span class="n">report</span> <span class="n">term</span> <span class="o">--</span><span class="n">cov</span><span class="o">-</span><span class="n">report</span> <span class="n">xml</span> <span class="o">--</span><span class="n">cov</span><span class="o">-</span><span class="n">config</span> <span class="o">.</span><span class="n">coveragerc</span> <span class="o">--</span><span class="n">junitxml</span><span class="o">=</span><span class="n">testresults</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Swap out the contents of <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> for your project’s current requirements.
If you don’t have any requirements yet, delete the contents of <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>.</p></li>
<li><p>Swap out the contents of <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> with an inital description of your project.
If you are keeping all the badges, make sure to change the URLs from <code class="docutils literal notranslate"><span class="pre">scottclowe/python-template-repo</span></code> to <code class="docutils literal notranslate"><span class="pre">your_username/your_repo</span></code>.
If you prefer, you can use markdown instead of rST.</p></li>
<li><p>Commit and push your changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">am</span> <span class="s2">&quot;Initialise project from template repository&quot;</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
</li>
</ol>
<p>When it comes time to make your first release, make sure you update the placeholder entry in CHANGELOG.rst to contain the correct details.
You’ll need to change <code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span></code> to the actual release date, and change the URL to point to your release.</p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gitignore">
<h3>.gitignore<a class="headerlink" href="#gitignore" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="https://git-scm.com/docs/gitignore">.gitignore</a> file is used specify untracked files which Git should ignore and not try to commit.</p>
<p>Our template’s .gitignore file is based on the <a class="reference external" href="https://github.com/github/gitignore">GitHub defaults</a>.
We use the default <a class="reference external" href="https://github.com/github/gitignore/blob/master/Python.gitignore">Python .gitignore</a>, <a class="reference external" href="https://github.com/github/gitignore/blob/master/Global/Windows.gitignore">Windows .gitignore</a>, <a class="reference external" href="https://github.com/github/gitignore/blob/master/Global/Linux.gitignore">Linux .gitignore</a>, and <a class="reference external" href="https://github.com/github/gitignore/blob/master/Global/macOS.gitignore">Mac OSX .gitignore</a> concatenated together.
(Released under <a class="reference external" href="https://github.com/github/gitignore/blob/master/LICENSE">CC0-1.0</a>.)</p>
<p>The Python .gitignore specifications prevent compiled files, packaging and sphinx artifacts, test outputs, etc, from being accidentally committed.
Even though you may develop on one OS, you might find a helpful contributor working on a different OS suddenly issues you a new PR, hence we include the gitignore for all OSes.
This makes both their life and yours easier by ignoring their temporary files before they even start working on the project.</p>
</div>
<div class="section" id="gitattributes">
<h3>.gitattributes<a class="headerlink" href="#gitattributes" title="Permalink to this headline">¶</a></h3>
<p>The most important reason to include a <a class="reference external" href="https://git-scm.com/docs/gitattributes">.gitattributes</a> file is to ensure that line endings are normalised, no matter which OS the developer is using.
This is largely achieved by the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">text</span><span class="o">=</span><span class="n">auto</span>
</pre></div>
</div>
<p>which <a class="reference external" href="https://git-scm.com/docs/gitattributes#_text">ensures</a> that all files Git decides contain text have their line endings normalized to LF on checkin.
This can cause problems if Git misdiagnoses a file as text when it is not, so we overwrite automatic detection based on file endings for some several common file endings.</p>
<p>Aside from this, we also gitattributes to tell git what kind of diff to generate.</p>
<p>Our template .gitattributes file is based on the <a class="reference external" href="https://github.com/alexkaratarakis/gitattributes">defaults from Alexander Karatarakis</a>.
We use the <a class="reference external" href="https://github.com/alexkaratarakis/gitattributes/blob/master/Common.gitattributes">Common .gitattributes</a> and <a class="reference external" href="https://github.com/alexkaratarakis/gitattributes/blob/master/Python.gitattributes">Python .gitattributes</a> concatenated together.
(Released under <a class="reference external" href="https://github.com/alexkaratarakis/gitattributes/blob/master/LICENSE.md">MIT License</a>.)</p>
</div>
<div class="section" id="black">
<h3>Black<a class="headerlink" href="#black" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/psf/black">Black</a> is an uncompromising Python code formatter.
By using it, you cede control over minutiae of hand-formatting.
But in return, you no longer have to worry about formatting your code correctly, since black will handle it.
Blackened code looks the same for all authors, ensuring consistent code formatting within your project.</p>
<p>The format used by Black makes code review faster by producing the smaller diffs.</p>
<p>Black’s output is always stable.
For a given block of code, a fixed version of black will always produce the same output.
However, you should note that different versions of black will produce different outputs.
If you want to upgrade to a newer version of black, you must change the version everywhere it is specified:</p>
<ul class="simple">
<li><p>requirements-dev.txt, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/requirements-dev.txt#L1">L1</a></p></li>
<li><p>.pre-commit-config.yaml, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/.pre-commit-config.yaml#L14">L14</a> and <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/.pre-commit-config.yaml#L24">L24</a></p></li>
<li><p>.github/workflows/lint.yaml, <a class="reference external" href="https://github.com/scottclowe/python-template-repo/blob/master/.github/workflows/lint.yaml#L19">L19</a></p></li>
</ul>
</div>
<div class="section" id="pre-commit">
<h3>pre-commit<a class="headerlink" href="#pre-commit" title="Permalink to this headline">¶</a></h3>
<p>The template repository comes with a <a class="reference external" href="https://pre-commit.com/">pre-commit</a> stack.
This is a set of git hooks which are executed everytime you make a commit.
The hooks catch errors as they occur, and will automatically fix some of these errors.</p>
<p>To set up the pre-commit hooks, run the following code from within the repo directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">-</span><span class="n">dev</span><span class="o">.</span><span class="n">txt</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
<p>Whenever you try to commit code which is flagged by the pre-commit hooks, the commit will not go through.
Some of the pre-commit hooks (such as <a class="reference external" href="https://github.com/psf/black">black</a>, <a class="reference external" href="https://github.com/timothycrosley/isort">isort</a>) will automatically modify your code to fix the issues.
When this happens, you’ll have to stage the changes made by the commit hooks and then try your commit again.
Other pre-commit hooks will not modify your code and will just tell you about issues which you’ll then have to manually fix.</p>
<p>You can also manually run the pre-commit stack on all the files at any time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">run</span> <span class="o">--</span><span class="nb">all</span><span class="o">-</span><span class="n">files</span>
</pre></div>
</div>
<p>The pre-commit stack includes the following operations:</p>
<ul class="simple">
<li><p>Reformats code to use the <a class="reference external" href="https://github.com/psf/black">black</a> style.
Any code <a class="reference external" href="https://github.com/asottile/blacken-docs">inside docstrings</a> will also be formatted to the black style.</p></li>
<li><p>Imports are automatically sorted using <a class="reference external" href="https://github.com/timothycrosley/isort">isort</a>.</p></li>
<li><p><a class="reference external" href="https://gitlab.com/pycqa/flake8">flake8</a> is run to check for conformity to the python style guide <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a>, along with several other formatting issues.</p></li>
<li><p><a class="reference external" href="https://github.com/asottile/setup-cfg-fmt">setup-cfg-fmt</a> is used to format any setup.cfg files.</p></li>
<li><p>Several <a class="reference external" href="https://github.com/pre-commit/pre-commit-hooks">hooks from pre-commit</a> are used to screen for non-language specific git issues, such as incomplete git merges, overly large files being commited to the repo, bugged JSON and YAML files.
JSON files are also prettified automatically to have standardised indentation.
Entries in requirements.txt files are automatically sorted alphabetically.</p></li>
<li><p>Several <a class="reference external" href="https://github.com/pre-commit/pygrep-hooks">hooks from pre-commit specific to python</a> are used to screen for rST formatting issues, and ensure noqa flags always specify an error code to ignore.</p></li>
</ul>
<p>Once it is set up, the pre-commit stack will run locally on every commit.
The pre-commit stack will also run on github with one of the action workflows, which ensures PRs are checked without having to rely on contributors to enable the pre-commit locally.</p>
</div>
<div class="section" id="automated-documentation">
<h3>Automated documentation<a class="headerlink" href="#automated-documentation" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> is based on the <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> default configuration.
It is set up to work well out of the box, with several features added in.</p>
<p>You can build the web documentation with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">C</span> <span class="n">docs</span> <span class="n">html</span>
</pre></div>
</div>
<p>And view the documentation like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sensible</span><span class="o">-</span><span class="n">browser</span> <span class="n">docs</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>Or you can build pdf documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">C</span> <span class="n">docs</span> <span class="n">latexpdf</span>
</pre></div>
</div>
<p>On Windows, this becomes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
<span class="n">make</span> <span class="n">latexpdf</span>
<span class="n">cd</span> <span class="o">..</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Your README.rst will become part of the generated documentation (via the file <code class="docutils literal notranslate"><span class="pre">docs/source/readme.rst</span></code>).
Note that the first line of README.rst is not included in the documentation, since this is expected to contain badges which you want to render on GitHub, but not include in your documentation pages.</p></li>
<li><p>Your docstrings to your modules, functions, classes and methods will be used to build a set of API documentation using <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html">autodoc</a>.
Our <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> is also set up to automatically call autodoc whenever it is run, and the output files which it generates are on the gitignore list.
This means you will automatically generate a fresh API description which exactly matches your current docstrings every time you generate the documentation.</p></li>
<li><p>Docstrings can be formatted in plain <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reST</a>, or using the <a class="reference external" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_numpy.html#example-numpy-style-python-docstrings">numpy format</a> (recommended), or <a class="reference external" href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html#example-google">Google format</a>.
Support for numpy and Google formats is through the <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">napoleon</a> extension (which we have enabled by default).</p></li>
<li><p>You can reference functions in the python core and common packages and they will automatically be hyperlinked to the appropriate documentation in your own documentation.
This is done using <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html">intersphinx</a> mappings, which you can see (and can add to) at the bottom of the <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> file.</p></li>
<li><p>The documentation theme is the one provided by <a class="reference external" href="https://readthedocs.org/">readthedocs</a>.
You can host the documentation for free on <a class="reference external" href="https://readthedocs.org/">readthedocs</a>, and it will fit right in.
Alternative themes can be found at <a class="reference external" href="https://www.writethedocs.org/guide/tools/sphinx-themes/">writethedocs</a>, with further options at <a class="reference external" href="https://sphinx-themes.org">sphinx-themes</a></p></li>
</ul>
</div>
<div class="section" id="consolidated-metadata">
<h3>Consolidated metadata<a class="headerlink" href="#consolidated-metadata" title="Permalink to this headline">¶</a></h3>
<p>Package metadata is consolidated into one place, the file <code class="docutils literal notranslate"><span class="pre">package_name/__meta__.py</span></code>.
You only have to write the metadata once in this centralised location, and everything else (packaging, documentation, etc) picks it up from there.
This is similar to <a class="reference external" href="https://packaging.python.org/guides/single-sourcing-package-version/">single-sourcing the package version</a>, but for all metadata.</p>
<p>This information is available to end-users with <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">package_name;</span> <span class="pre">print(package_name.__meta__)</span></code>.
The version information is also accessible at <code class="docutils literal notranslate"><span class="pre">package_name.__version__</span></code>, as per <a class="reference external" href="https://www.python.org/dev/peps/pep-0396/#specification">PEP-396</a>.</p>
</div>
<div class="section" id="setup-py">
<h3>setup.py<a class="headerlink" href="#setup-py" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> script is used to build and install your package.</p>
<p>Your package can be installed from source with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<p>or alternatively with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>But do remember that as a developer, you should install your package in editable mode, using either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">develop</span>
</pre></div>
</div>
<p>which will mean changes to the source will affect your installed package immediately without you having to reinstall it.</p>
<p>By default, when the package is installed only the main requirements, listed in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> will be installed with it.
Requirements listed in <code class="docutils literal notranslate"><span class="pre">requirements-dev.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">requirements-docs.txt</span></code>, and <code class="docutils literal notranslate"><span class="pre">requirements-test.txt</span></code> are optional extras.
The <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> script is configured to include these as extras named <code class="docutils literal notranslate"><span class="pre">dev</span></code>, <code class="docutils literal notranslate"><span class="pre">docs</span></code>, and <code class="docutils literal notranslate"><span class="pre">test</span></code>.
They can be installed along with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span><span class="p">[</span><span class="n">dev</span><span class="p">]</span>
</pre></div>
</div>
<p>etc.
Another extra named <code class="docutils literal notranslate"><span class="pre">all</span></code> captures all of these dependencies.</p>
<p>Your README file is automatically included in the metadata when you use setup.py build wheels for PyPI.
The rest of the metadata comes from <code class="docutils literal notranslate"><span class="pre">package_name/__meta__.py</span></code>.</p>
<p>Our template setup.py file is based on the <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#basic-use">example from setuptools documentation</a>, and the comprehensive example from <a class="reference external" href="https://github.com/kennethreitz/setup.py">Kenneth Reitz</a> (released under <a class="reference external" href="https://github.com/kennethreitz/setup.py/blob/master/LICENSE">MIT License</a>), with further features added.</p>
</div>
<div class="section" id="unit-tests">
<h3>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h3>
<p>The file <code class="docutils literal notranslate"><span class="pre">package_name/tests/base_test.py</span></code> provides a class for unit testing which provides easy access to all the numpy testing in one place (so you don’t need to import a stack of testing functions in every test file, just import the <code class="docutils literal notranslate"><span class="pre">BaseTestClass</span></code> instead).</p>
<p>If you aren’t using doing numeric tests, you can delete this from the <code class="docutils literal notranslate"><span class="pre">package_name/tests/base_test.py</span></code> file.</p>
</div>
<div class="section" id="github-actions-workflows">
<h3>GitHub Actions Workflows<a class="headerlink" href="#github-actions-workflows" title="Permalink to this headline">¶</a></h3>
<p>GitHub features the ability to run various workflows whenever code is pushed to the repo or a pull request is opened.
This is one service of several services that can be used to continually run the unit tests and ensure changes can be integrated together without issue.
It is also useful to ensure that style guides are adhered to</p>
<p>Five workflows are included:</p>
<dl class="simple">
<dt>docs</dt><dd><p>The docs workflow ensures the documentation builds correctly, and presents any errors and warnings nicely as annotations.</p>
</dd>
<dt>pre-commit</dt><dd><p>Runs the pre-commit stack.
Ensures all contributions are compliant, even if a contributor has not set up pre-commit on their local machine.</p>
</dd>
<dt>lint</dt><dd><p>Checks the code uses the <a class="reference external" href="https://github.com/psf/black">black</a> style and tests for <a class="reference external" href="https://gitlab.com/pycqa/flake8">flake8</a> errors.
If you are using the pre-commit hooks, the lint workflow is superfluous and can be deleted.</p>
</dd>
<dt>test</dt><dd><p>Runs the unit tests, and pushes coverage reports to <a class="reference external" href="https://codecov.io/">Codecov</a>.
You’ll need to sign up at <a class="reference external" href="https://codecov.io/">Codecov</a> with your GitHub account in order for this integration to work.</p>
</dd>
<dt>release candidate tests</dt><dd><p>The release candidate tests workflow runs the unit tests on more Python versions and operating systems than the regular test workflow.
This runs on all tags, plus pushes and PRs to branches named like “v1.2.x”, etc.
Wheels are built for all the tested systems, and stored as artifacts for your convenience when shipping a new distribution.</p>
</dd>
</dl>
<p>If you enable the <code class="docutils literal notranslate"><span class="pre">publish</span></code> job on the release candidate tests workflow, you can also push built release candidates to the <a class="reference external" href="https://test.pypi.org/">Test PyPI</a> server.
For this to work, you’ll also need to add your Test <a class="reference external" href="https://pypi.org/help/#apitoken">PyPI API token</a> to your <a class="reference external" href="https://docs.github.com/en/actions/reference/encrypted-secrets">GitHub secrets</a>.
Checkout the <a class="reference external" href="https://github.com/pypa/gh-action-pypi-publish">pypa/gh-action-pypi-publish</a> GitHub action, and <a class="reference external" href="https://packaging.python.org/guides/publishing-package-distribution-releases-using-github-actions-ci-cd-workflows/">PyPI’s guide on distributing from CI</a> for more information on this.
With minimal tweaks, this job can be changed to push to PyPI for real, but be careful with this since releases on PyPI can not easily be yanked.</p>
</div>
<div class="section" id="other-ci-cd-options">
<h3>Other CI/CD options<a class="headerlink" href="#other-ci-cd-options" title="Permalink to this headline">¶</a></h3>
<p>Alternative CI/CD services are also available for running tests.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://travis-ci.org/">Travis CI</a> offers a free trial service.</p></li>
<li><p><a class="reference external" href="https://circleci.com">Circle CI</a> is another option with a limited <a class="reference external" href="https://circleci.com/pricing/#build-linux">free option</a>.</p></li>
<li><p><a class="reference external" href="https://www.appveyor.com">Appveyor</a> useful for testing on Windows.
This offers an alternative to GitHub Actions if you need to <a class="reference external" href="https://github.com/ogrisel/python-appveyor-demo">build Windows wheel files to submit to PyPI</a>.</p></li>
<li><p><a class="reference external" href="https://jenkins.io/">Jenkins</a> is useful if you want to run your CI test suite locally or on your own private server instead of in the cloud.</p></li>
</ul>
</div>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Contributions are welcome! If you can see a way to improve this template:</p>
<ul class="simple">
<li><p>Do click the fork button</p></li>
<li><p>Make your changes and make a pull request.</p></li>
</ul>
<p>Or to report a bug or request something new, make an issue.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/packages/modules.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="source/packages/package_name.html">package_name package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source/changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="source/changelog.html#version-0-1-0">Version 0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="source/packages/modules.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Author Name.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>